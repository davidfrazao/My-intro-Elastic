version: "3.9"

services:
  elasticvue:
    build:
      context: .
      dockerfile: Dockerfile.elasticvue
    container_name: elasticvue
    environment:
      # You can pass either a bare array OR the full { "clusters": [...] } object.
      ELASTICVUE_CLUSTERS: >-
        [{"name":"ES-DOCKER-ES-Index-Inverted","uri":"http://127.0.0.1:9200"},
         {"name":"ES-DOCKER-ES01-3-nodes","uri":"http://127.0.0.1:9201","username": "elastic", "password": "elastic"},
         {"name":"ES-DOCKER-ES02-3-nodes","uri":"http://127.0.0.1:9202","username": "elastic", "password": "elastic"},
         {"name":"ES-DOCKER-ES03-3-nodes","uri":"http://127.0.0.1:9203","username": "elastic", "password": "elastic"}]
    ports:
      - "8081:8080"
    restart: unless-stopped
    networks:
      - elk-docker

networks:           # This section defines custom networks for use in a Docker Compose file.
  elk-docker:       # This is the name of the network your services will connect to.
    external: true  # Tells Docker Compose not to create this network. 
                    # It must already exist (created outside the current docker-compose.yml context).

