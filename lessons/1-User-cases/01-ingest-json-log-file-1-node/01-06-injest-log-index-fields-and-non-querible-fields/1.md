Letâ€™s break down what youâ€™re asking:

You want to **ingest an index into Elasticsearch** (i.e., index some documents) such that:

1. The index has **fields** (normal fields you can query).
2. Some fields are **not queriable** (i.e., not searchable or indexed).

Below is a complete example and explanation for both parts.

---

## ğŸ§© 1. Create an index with field mappings

You can control whether fields are *queriable* by setting `"index": false` in the field mapping.

Example â€” Create an index with both searchable and non-searchable fields:

```bash
PUT my-ingest-index
{
  "mappings": {
    "properties": {
      "user": {
        "type": "keyword"
      },
      "message": {
        "type": "text"
      },
      "raw_payload": {
        "type": "object",
        "enabled": false
      },
      "non_searchable_field": {
        "type": "keyword",
        "index": false
      }
    }
  }
}
```

### Explanation:

* `"user"` and `"message"` â†’ queriable fields.
* `"non_searchable_field"` â†’ stored, but not indexed (cannot be searched or filtered).
* `"raw_payload"` with `"enabled": false` â†’ completely ignored by the indexer (not indexed, not stored, not queriable â€” but stays in `_source`).

---

## ğŸ§¾ 2. Ingest documents into this index

```bash
POST my-ingest-index/_doc
{
  "user": "alice",
  "message": "Login successful",
  "non_searchable_field": "internal_tag_001",
  "raw_payload": {
    "session_id": "abc123",
    "ip": "10.0.0.1"
  }
}
```

This will successfully store the document.

---

## ğŸ” 3. Query behavior

### Searchable field query:

```bash
GET my-ingest-index/_search
{
  "query": {
    "match": {
      "message": "Login"
    }
  }
}
```

âœ… Works â€” `"message"` is indexed.

### Non-searchable field query:

```bash
GET my-ingest-index/_search
{
  "query": {
    "term": {
      "non_searchable_field": "internal_tag_001"
    }
  }
}
```

ğŸš« Returns no results â€” `"non_searchable_field"` is not indexed.

---

## ğŸ§  Summary

| Field                  | Stored in `_source` | Indexed (Queryable) | Can aggregate |
| ---------------------- | ------------------- | ------------------- | ------------- |
| `user`                 | âœ…                   | âœ…                   | âœ…             |
| `message`              | âœ…                   | âœ…                   | âœ…             |
| `non_searchable_field` | âœ…                   | âŒ                   | âŒ             |
| `raw_payload`          | âœ…                   | âŒ (not even parsed) | âŒ             |

---

Would you like me to show how to do this via **Ingest Pipeline** (e.g., adding or removing fields before indexing)? Thatâ€™s often used when you want to drop or disable fields dynamically.
